---
# This variable dynamically determines the IP address for Nomad to advertise.
# It prefers the first non-loopback IPv6 address if available,
# otherwise it falls back to the default IPv4 address.
advertise_ip: "{{ ansible_all_ipv6_addresses[0] | default(ansible_default_ipv4.address) }}"

# A list of llama.cpp models to be deployed as Nomad services.
llama_cpp_models:
  - NAMESPACE: "default"
    JOB_NAME: "Llama-3-8B-Instruct"
    API_SERVICE_NAME: "llama-api-Llama-3-8B-Instruct"
    RPC_SERVICE_NAME: "llama-rpc-worker-Llama-3-8B-Instruct"
    MODEL_PATH: "/opt/nomad/models/Meta-Llama-3-8B-Instruct-Q4_K_M.gguf"
    MODEL_FILENAME: "Meta-Llama-3-8B-Instruct-Q4_K_M.gguf"
    WORKER_COUNT: "1"
    MEMORY_MB: 8192

  - NAMESPACE: "default"
    JOB_NAME: "phi-3-mini-instruct"
    API_SERVICE_NAME: "llama-api-phi-3-mini-instruct"
    RPC_SERVICE_NAME: "llama-rpc-worker-phi-3-mini-instruct"
    MODEL_PATH: "/opt/nomad/models/Phi-3-mini-4k-instruct-Q4_K_M.gguf"
    MODEL_FILENAME: "Phi-3-mini-4k-instruct-Q4_K_M.gguf"
    WORKER_COUNT: "1"
    MEMORY_MB: 4096
