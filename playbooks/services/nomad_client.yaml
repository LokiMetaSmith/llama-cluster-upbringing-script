- name: Configure Nomad as a client
  hosts: all
  become: yes
  tags:
    - nomad-client

  tasks:
    - name: Include Nomad role
      ansible.builtin.include_role:
        name: nomad
      vars:
        nomad_mode: "client"
        nomad_server_join:
          enabled: true
          server_address: "{{ controller_ip | default('127.0.0.1') }}"
