<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="description" content="Workflow Monitor">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workflow Monitor</title>
    <link rel="stylesheet" href="/static/css/styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.28.1/cytoscape.min.js"></script>
</head>
<body>
    <div class="container">
        <div id="sidebar">
            <h2>Workflow Runs</h2>
            <div style="padding: 5px;">
                <button id="refresh-history-btn" class="refresh-btn" aria-label="Refresh workflow history">
                    <svg viewBox="0 0 24 24">
                        <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
                    </svg>
                    Refresh
                </button>
            </div>
            <ul id="history-list" role="listbox" aria-label="Workflow History"></ul>
        </div>
        <div id="main-content">
            <div id="toolbar">
                <h1 id="view-title">Workflow Monitor (Live)</h1>
                <button id="live-btn" class="live-active" aria-pressed="true">Stop Live View</button>
                <div id="approval-container"></div>
                <a href="/" class="nav-link">Back to Mission Control</a>
            </div>
            <div id="cy"></div>
        </div>
    </div>

    <!-- Node Detail Modal -->
    <div id="nodeModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
        <div class="modal-content">
            <button class="close" aria-label="Close modal">&times;</button>
            <h3 id="modal-title">Node Output</h3>
            <pre id="node-output-content" tabindex="0" aria-label="Node Output content"></pre>
        </div>
    </div>

    <script src="/static/js/workflow.js"></script>
</body>
</html>
